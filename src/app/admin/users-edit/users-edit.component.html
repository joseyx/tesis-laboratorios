<div class="main">
  <div class="container">
    <header>Formulario de Edición</header>
    <form #updateForm="ngForm" class="form" (ngSubmit)="onSubmit(updateForm)">
      <div class="input-box">
        <label for="imagen">Imagen de Perfil:</label>
        <input type="file" id="imagen" [(ngModel)]="user.image" (change)="onFileChange($event)" name="imagen" #imageInput required #imageField="ngModel" />
        <div *ngIf="user.image">
          <img [src]="user.image" alt="Vista previa de la imagen" style="max-width: 100px; max-height: 100px;"/>
        </div>
        <div *ngIf="imageField.invalid && (imageField.dirty || imageField.touched)" class="error">
          <div *ngIf="imageField.errors?.['required']">La imagen es obligatoria.</div>
        </div>
      </div>
      <div class="role-selection">
        <div class="role-label">
          <label>Rol del usuario:</label> <!-- Assuming you have a general label for the role -->
        </div>
        <div class="radio-buttons">
          <div>
            <input type="radio" id="role_admin" [(ngModel)]="user.role" name="role" #roleInput required #roleField="ngModel" value="administrador" />
            <label for="role_admin">Administrador</label>
          </div>
          <div>
            <input type="radio" id="role_medic" name="role" [(ngModel)]="user.role" name="role" #roleInput required #roleField="ngModel" value="medico" />
            <label for="role_medic">Médico</label>
          </div>
          <div *ngIf="roleField.invalid && (roleField.dirty || roleField.touched)" class="error">
            <div *ngIf="roleField.errors?.['required']">La imagen es obligatoria.</div>
          </div>
        </div>
      </div>
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>
      <div class="input-box">
        <button type="submit" class="btn" [disabled]="updateForm.invalid">Actualizar Usuario</button>
      </div>
    </form>
  </div>
</div>
